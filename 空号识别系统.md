---
title: 空号识别系统
language_tabs:
  - shell: Shell
  - http: HTTP
  - javascript: JavaScript
  - ruby: Ruby
  - python: Python
  - php: PHP
  - java: Java
  - go: Go
toc_footers: []
includes: []
search: true
code_clipboard: true
highlight_theme: darkula
headingLevel: 2
generator: "@tarslib/widdershins v4.0.30"

---

# 空号识别系统

Base URLs:

# Authentication

# Default

## GET 获取客户端分配的ID

GET /notify

> 返回示例

> 200 Response

```json
{
  "code": 200,
  "msg": "",
  "data": {
    "clientId": "xxx"
  }
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|none|Inline|

### 返回数据结构

状态码 **200**

|名称|类型|必选|约束|中文名|说明|
|---|---|---|---|---|---|
|» code|integer|true|none||none|
|» msg|string|true|none||none|
|» data|object|true|none||none|
|»» clientId|string|true|none||返回分配的客户ID|

## GET 获取拨号计划

GET /dialplan/{clientId}

### 请求参数

|名称|位置|类型|必选|说明|
|---|---|---|---|---|
|clientId|path|string| 是 |客户端ID|

> 返回示例

> 200 Response

```json
{
  "code": 200,
  "msg": "",
  "data": {
    "dialplans": [
      {
        "extensionNum": "xxx",
        "phoneNum": "1xxxxxxxxxx"
      }
    ]
  }
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|none|Inline|

### 返回数据结构

状态码 **200**

|名称|类型|必选|约束|中文名|说明|
|---|---|---|---|---|---|
|» code|integer|true|none|状态码|200成功、其他为失败|
|» msg|string|true|none|消息|none|
|» data|object|true|none|数据对象|none|
|»» dialplans|[object]|true|none|拨号计划列表|这个的多少根据客户端分机号得多少来决定|
|»»» phoneNum|string|false|none|手机号|none|

## GET 获取分机账号

GET /accounts/{clientId}

### 请求参数

|名称|位置|类型|必选|说明|
|---|---|---|---|---|
|clientId|path|string| 是 |客户端ID|
|threadsNum|query|integer| 是 |线程的数量，用于对其分配的账号|

> 返回示例

> 200 Response

```json
{
  "code": 200,
  "msg": "",
  "data": {
    "accounts": [
      {
        "extensionNum": "xxx",
        "password": "xxxx"
      },
      {
        "extensionNum": "xxx",
        "password": "xxxx"
      }
    ]
  }
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|none|Inline|

### 返回数据结构

状态码 **200**

|名称|类型|必选|约束|中文名|说明|
|---|---|---|---|---|---|
|» code|integer|true|none||none|
|» msg|string|true|none||none|
|» data|object|true|none||none|
|»» accounts|[object]|true|none|账号列表|根据配置的户口端线程数来分配|
|»»» extensionNum|string|true|none|分机号|none|
|»»» password|string|true|none|密码|none|

## POST 心跳接口

POST /heartbeat/{clientId}

### 请求参数

|名称|位置|类型|必选|说明|
|---|---|---|---|---|
|clientId|path|string| 是 |none|

> 返回示例

> 200 Response

```json
{
  "code": 200,
  "msg": "",
  "data": {
    "timestamp": "16xxx"
  }
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|none|Inline|

### 返回数据结构

状态码 **200**

|名称|类型|必选|约束|中文名|说明|
|---|---|---|---|---|---|
|» code|integer|true|none|状态码|200成功、其他为失败|
|» msg|string|true|none|消息|none|
|» data|object|true|none|数据对象|none|
|»» timestamp|string|true|none|时间戳|none|

## GET 状态提交接口

GET /status/{clientId}

### 请求参数

|名称|位置|类型|必选|说明|
|---|---|---|---|---|
|clientId|path|string| 是 |客户端ID|
|status|query|string| 是 |分机状态|
|extensionNum|query|string| 是 |分机号|
|phoneNum|query|string| 是 |手机号|

#### 枚举值

|属性|值|
|---|---|
|status|during|
|status|call|
|status|idle|
|status|unregistered|

> 返回示例

> 200 Response

```json
{
  "code": 200,
  "msg": "",
  "data": {
    "timestamp": "16xxx"
  }
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|none|Inline|

### 返回数据结构

状态码 **200**

|名称|类型|必选|约束|中文名|说明|
|---|---|---|---|---|---|
|» code|integer|true|none|状态码|none|
|» msg|string|true|none|消息|none|
|» data|object|true|none|数据对象|none|
|»» timestamp|string|true|none|时间戳|none|

## POST 音频上传接口

POST /dial_wav/{clientId}

> Body 请求参数

```yaml
file_name: ""
extensionNum: xxx
phone: 1xxxxxxxxxx

```

### 请求参数

|名称|位置|类型|必选|说明|
|---|---|---|---|---|
|clientId|path|string| 是 |客户端ID|
|body|body|object| 否 |none|
|» file_name|body|string(binary)| 否 |文件名|
|» extensionNum|body|string| 否 |分机号|
|» phone|body|string| 否 |手机号|

> 返回示例

> 200 Response

```json
{
  "code": 200,
  "msg": "",
  "data": {
    "timestamp": "16xxx"
  }
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|none|Inline|

### 返回数据结构

状态码 **200**

|名称|类型|必选|约束|中文名|说明|
|---|---|---|---|---|---|
|» code|integer|true|none|状态码|none|
|» msg|string|true|none|消息|none|
|» data|object|true|none|数据对象|none|
|»» timestamp|string|true|none|时间戳|none|

# 数据模型

